import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js";
import {getDatabase, ref, get, child, update, onValue} from "https://www.gstatic.com/firebasejs/9.1.0/firebase-database.js";

//mapping
const A = [242, 241, 224, 225, 226, 227, 228, 202, 203, 240, 243, 223, 221, 222, 207, 208, 209, 210, 211, 179, 180, 181, 165, 166, 167, 131, 132, 133, 134, 164, 163, 135, 136, 162, 161, 160, 159, 158, 157, 156, 190, 200, 201, 204, 188, 189, 141, 142, 140, 139, 138, 137, 106, 104, 105, 85, 86, 113, 114, 115, 75, 76, 77, 53, 54, 55, 84, 46, 45, 44];
const Acol = [[242,"e9692c"],[241,"e9692c"],[240,"e9692c"],[243,"e9692c"],[224,"e9692c"],[225,"e9692c"],[226,"e9692c"],[227,"e9692c"],[203,"e9692c"],[204,"e9692c"],[202,"e9692c"],[201,"e9692c"],[200,"e9692c"],[228,"e9692c"],[223,"e9692c"],[222,"e9692c"],[221,"e9692c"],[208,"e9692c"],[207,"e9692c"],[209,"e9692c"],[179,"e9692c"],[180,"e9692c"],[181,"e9692c"],[165,"e9692c"],[166,"e9692c"],[167,"e9692c"],[131,"e9692c"],[132,"e9692c"],[133,"e9692c"],[134,"e9692c"],[135,"e9692c"],[136,"e9692c"],[137,"e9692c"],[138,"e9692c"],[139,"e9692c"],[159,"e9692c"],[160,"e9692c"],[161,"e9692c"],[162,"e9692c"],[163,"e9692c"],[164,"e9692c"],[210,"e9692c"],[211,"e9692c"],[188,"e9692c"],[189,"e9692c"],[190,"e9692c"],[156,"e9692c"],[157,"e9692c"],[158,"e9692c"],[140,"e9692c"],[141,"e9692c"],[142,"e9692c"],[104,"e9692c"],[105,"e9692c"],[106,"e9692c"],[84,"e9692c"],[85,"e9692c"],[86,"e9692c"],[44,"e9692c"],[45,"e9692c"],[46,"e9692c"],[53,"e9692c"],[54,"e9692c"],[55,"e9692c"],[75,"e9692c"],[76,"e9692c"],[77,"e9692c"],[113,"e9692c"],[114,"e9692c"],[115,"e9692c"]]

const B = [246, 220, 221, 245, 244, 243, 223, 222, 224, 242, 241, 225, 226, 227, 240, 239, 238, 237, 228, 229, 230, 231, 199, 200, 201, 189, 190, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 181, 209, 210, 180, 182, 208, 183, 184, 185, 186, 187, 188, 143, 142, 141, 105, 104, 103, 87, 86, 85, 45, 84, 46, 83, 47, 48, 82, 166, 132, 133, 134, 112, 113, 114, 76, 77, 78, 79, 80, 81, 49, 50, 51, 52, 53, 54]
const Bcol = [[246, "e9692c"],[220, "e9692c"],[221, "e9692c"],[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[223, "e9692c"],[222, "e9692c"],[224, "e9692c"],[242, "e9692c"],[241, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[240, "e9692c"],[239, "e9692c"],[238, "e9692c"],[237, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[231, "e9692c"],[199, "e9692c"],[200, "e9692c"],[201, "e9692c"],[189, "e9692c"],[190, "e9692c"],[191, "e9692c"],[155, "e9692c"],[156, "e9692c"],[157, "e9692c"],[158, "e9692c"],[159, "e9692c"],[160, "e9692c"],[161, "e9692c"],[162, "e9692c"],[163, "e9692c"],[164, "e9692c"],[165, "e9692c"],[181, "e9692c"],[209, "e9692c"],[210, "e9692c"],[180, "e9692c"],[182, "e9692c"],[208, "e9692c"],[183, "e9692c"],[184, "e9692c"],[185, "e9692c"],[186, "e9692c"],[187, "e9692c"],[188, "e9692c"],[143, "e9692c"],[142, "e9692c"],[141, "e9692c"],[105, "e9692c"],[104, "e9692c"],[103, "e9692c"],[87, "e9692c"],[86, "e9692c"],[85, "e9692c"],[45, "e9692c"],[84, "e9692c"],[46, "e9692c"],[83, "e9692c"],[47, "e9692c"],[48, "e9692c"],[82, "e9692c"],[166, "e9692c"],[132, "e9692c"],[133, "e9692c"],[134, "e9692c"],[112, "e9692c"],[113, "e9692c"],[114, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[49, "e9692c"],[50, "e9692c"],[51, "e9692c"],[52, "e9692c"],[53, "e9692c"],[54, "e9692c"]]

const C = [238, 239, 227, 228, 229, 230, 200, 201, 202, 240, 241, 242, 243, 244, 222, 223, 224, 225, 226, 221, 220, 219, 211, 210, 209, 181, 180, 179, 167, 166, 165, 133, 132, 131, 115, 114, 113, 77, 76, 75, 78, 79, 80, 81, 82, 83, 84, 85, 86, 104, 105, 106, 46, 47, 48, 49, 50, 51, 52, 53]
const Ccol = [[238, "e9692c"],[239, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[200, "e9692c"],[201, "e9692c"],[202, "e9692c"],[240, "e9692c"],[241, "e9692c"],[242, "e9692c"],[243, "e9692c"],[244, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[221, "e9692c"],[220, "e9692c"],[219, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[181, "e9692c"],[180, "e9692c"],[179, "e9692c"],[167, "e9692c"],[166, "e9692c"],[165, "e9692c"],[133, "e9692c"],[132, "e9692c"],[131, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[77, "e9692c"],[76, "e9692c"],[75, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[83, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[104, "e9692c"],[105, "e9692c"],[106, "e9692c"],[46, "e9692c"],[47, "e9692c"],[48, "e9692c"],[49, "e9692c"],[50, "e9692c"],[51, "e9692c"],[52, "e9692c"],[53, "e9692c"]]

const D = [246, 245, 244, 243, 242, 241, 240, 239, 238, 228, 229, 227, 226, 225, 224, 223, 222, 221, 220, 210, 209, 208, 182, 181, 180, 166, 165, 164, 134, 133, 132, 114, 113, 112, 78, 77, 76, 54, 53, 52, 51, 79, 80, 81, 82, 49, 50, 48, 47, 83, 46, 84, 85, 86, 230, 231, 199, 200, 201, 189, 190, 191, 155, 156, 157, 141, 142, 143, 103, 104, 105]
const Dcol = [[246, "e9692c"],[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[242, "e9692c"],[241, "e9692c"],[240, "e9692c"],[239, "e9692c"],[238, "e9692c"],[228, "e9692c"],[229, "e9692c"],[227, "e9692c"],[226, "e9692c"],[225, "e9692c"],[224, "e9692c"],[223, "e9692c"],[222, "e9692c"],[221, "e9692c"],[220, "e9692c"],[210, "e9692c"],[209, "e9692c"],[208, "e9692c"],[182, "e9692c"],[181, "e9692c"],[180, "e9692c"],[166, "e9692c"],[165, "e9692c"],[164, "e9692c"],[134, "e9692c"],[133, "e9692c"],[132, "e9692c"],[114, "e9692c"],[113, "e9692c"],[112, "e9692c"],[78, "e9692c"],[77, "e9692c"],[76, "e9692c"],[54, "e9692c"],[53, "e9692c"],[52, "e9692c"],[51, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[49, "e9692c"],[50, "e9692c"],[48, "e9692c"],[47, "e9692c"],[83, "e9692c"],[46, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[230, "e9692c"],[231, "e9692c"],[199, "e9692c"],[200, "e9692c"],[201, "e9692c"],[189, "e9692c"],[190, "e9692c"],[191, "e9692c"],[155, "e9692c"],[156, "e9692c"],[157, "e9692c"],[141, "e9692c"],[142, "e9692c"],[143, "e9692c"],[103, "e9692c"],[104, "e9692c"],[105, "e9692c"]]

const E = [236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 211, 210, 209, 179, 180, 181, 167, 166, 165, 164, 163, 162, 161, 160, 159, 131, 132, 133, 115, 114, 113, 75, 76, 77, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 78, 79, 80, 81, 82, 83, 84, 85, 86, 182, 183, 184, 185, 186, 187, 188, 158]
const Ecol = [[236, "e9692c"],[237, "e9692c"],[238, "e9692c"],[239, "e9692c"],[240, "e9692c"],[241, "e9692c"],[242, "e9692c"],[243, "e9692c"],[244, "e9692c"],[245, "e9692c"],[246, "e9692c"],[247, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[179, "e9692c"],[180, "e9692c"],[181, "e9692c"],[167, "e9692c"],[166, "e9692c"],[165, "e9692c"],[164, "e9692c"],[163, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[159, "e9692c"],[131, "e9692c"],[132, "e9692c"],[133, "e9692c"],[134, "e9692c"],[135, "e9692c"],[136, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[75, "e9692c"],[76, "e9692c"],[77, "e9692c"],[55, "e9692c"],[54, "e9692c"],[53, "e9692c"],[52, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"],[47, "e9692c"],[46, "e9692c"],[45, "e9692c"],[44, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[83, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[182, "e9692c"],[183, "e9692c"],[184, "e9692c"],[185, "e9692c"],[186, "e9692c"],[187, "e9692c"],[188, "e9692c"],[158, "e9692c"]];

const F = [247, 246, 245, 244, 243, 242, 241, 240, 239, 238, 237, 236, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 211, 210, 209, 179, 180, 181, 182, 183, 184, 185, 186, 187, 167, 166, 165, 164, 163, 162, 161, 160, 159, 131, 132, 133, 115, 114, 113, 75, 76, 77, 55, 54, 53]
const Fcol = [[247, "e9692c"],[246, "e9692c"],[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[242, "e9692c"],[241, "e9692c"],[240, "e9692c"],[239, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[179, "e9692c"],[180, "e9692c"],[181, "e9692c"],[182, "e9692c"],[183, "e9692c"],[184, "e9692c"],[185, "e9692c"],[186, "e9692c"],[187, "e9692c"],[167, "e9692c"],[166, "e9692c"],[165, "e9692c"],[164, "e9692c"],[163, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[159, "e9692c"],[131, "e9692c"],[132, "e9692c"],[133, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[75, "e9692c"],[76, "e9692c"],[77, "e9692c"],[55, "e9692c"],[54, "e9692c"],[53, "e9692c"]]

const G = [245, 244, 243, 242, 241, 240, 239, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 211, 210, 209, 203, 202, 201, 179, 180, 181, 167, 166, 165, 162, 161, 160, 159, 158, 157, 131, 132, 133, 136, 137, 138, 139, 140, 141, 115, 114, 113, 107, 106, 105, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 53, 52, 51, 50, 49, 48, 47]
const Gcol = [[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[242, "e9692c"],[241, "e9692c"],[240, "e9692c"],[239, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[203, "e9692c"],[202, "e9692c"],[201, "e9692c"],[179, "e9692c"],[180, "e9692c"],[181, "e9692c"],[167, "e9692c"],[166, "e9692c"],[165, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[159, "e9692c"],[158, "e9692c"],[157, "e9692c"],[131, "e9692c"],[132, "e9692c"],[133, "e9692c"],[136, "e9692c"],[137, "e9692c"],[138, "e9692c"],[139, "e9692c"],[140, "e9692c"],[141, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[107, "e9692c"],[106, "e9692c"],[105, "e9692c"],[75, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[83, "e9692c"],[84, "e9692c"],[85, "e9692c"],[53, "e9692c"],[52, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"],[47, "e9692c"]]

const H = [247, 246, 245, 238, 237, 236, 219, 220, 221, 228, 229, 230, 211, 210, 209, 202, 201, 200, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 167, 166, 165, 164, 163, 162, 161, 160, 159, 158, 157, 156, 140, 141, 142, 106, 105, 104, 84, 85, 86, 46, 45, 44, 131, 132, 133, 115, 114, 113, 75, 76, 77, 55, 54, 53]
const Hcol = [[247, "e9692c"],[246, "e9692c"],[245, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[202, "e9692c"],[201, "e9692c"],[200, "e9692c"],[179, "e9692c"],[180, "e9692c"],[181, "e9692c"],[182, "e9692c"],[183, "e9692c"],[184, "e9692c"],[185, "e9692c"],[186, "e9692c"],[187, "e9692c"],[188, "e9692c"],[189, "e9692c"],[190, "e9692c"],[167, "e9692c"],[166, "e9692c"],[165, "e9692c"],[164, "e9692c"],[163, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[159, "e9692c"],[158, "e9692c"],[157, "e9692c"],[156, "e9692c"],[140, "e9692c"],[141, "e9692c"],[142, "e9692c"],[106, "e9692c"],[105, "e9692c"],[104, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[46, "e9692c"],[45, "e9692c"],[44, "e9692c"],[131, "e9692c"],[132, "e9692c"],[133, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[75, "e9692c"],[76, "e9692c"],[77, "e9692c"],[55, "e9692c"],[54, "e9692c"],[53, "e9692c"]] 

const I = [247, 246, 245, 244, 243, 242, 241, 240, 239, 238, 237, 236, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 206, 205, 204, 184, 185, 186, 162, 161, 160, 136, 137, 138, 110, 109, 108, 80, 81, 82, 54, 53, 52, 75, 55, 76, 77, 78, 79, 51, 50, 49, 48, 83, 84, 85, 86, 47, 46, 45, 44]
const Icol = [[247, "e9692c"],[246, "e9692c"],[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[242, "e9692c"],[241, "e9692c"],[240, "e9692c"],[239, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[206, "e9692c"],[205, "e9692c"],[204, "e9692c"],[184, "e9692c"],[185, "e9692c"],[186, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[136, "e9692c"],[137, "e9692c"],[138, "e9692c"],[110, "e9692c"],[109, "e9692c"],[108, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[54, "e9692c"],[53, "e9692c"],[52, "e9692c"],[75, "e9692c"],[55, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[79, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"],[83, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[47, "e9692c"],[46, "e9692c"],[45, "e9692c"],[44, "e9692c"]]

const J = [239, 238, 237, 227, 228, 229, 203, 202, 201, 187, 188, 189, 159, 158, 157, 139, 140, 141, 107, 106, 105, 83, 130, 131, 132, 116, 115, 114, 74, 75, 76, 77, 78, 79, 80, 81, 82, 84, 85, 53, 52, 51, 50, 49, 48]
const Jcol = [[239, "e9692c"],[238, "e9692c"],[237, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[203, "e9692c"],[202, "e9692c"],[201, "e9692c"],[187, "e9692c"],[188, "e9692c"],[189, "e9692c"],[159, "e9692c"],[158, "e9692c"],[157, "e9692c"],[139, "e9692c"],[140, "e9692c"],[141, "e9692c"],[107, "e9692c"],[106, "e9692c"],[105, "e9692c"],[83, "e9692c"],[130, "e9692c"],[131, "e9692c"],[132, "e9692c"],[116, "e9692c"],[115, "e9692c"],[114, "e9692c"],[74, "e9692c"],[75, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[84, "e9692c"],[85, "e9692c"],[53, "e9692c"],[52, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"]];

const K = [246, 245, 244, 238, 237, 236, 220, 221, 222, 226, 227, 228, 229, 210, 209, 208, 206, 205, 204, 203, 180, 181, 182, 183, 184, 185, 166, 165, 164, 163, 162, 132, 133, 134, 135, 136, 137, 114, 113, 112, 110, 109, 108, 107,76,  77, 78, 82, 83, 84, 85, 46, 45, 44, 54, 53, 52]
const Kcol = [[246, "e9692c"],[245, "e9692c"],[244, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[210, "e9692c"],[209, "e9692c"],[208, "e9692c"],[206, "e9692c"],[205, "e9692c"],[204, "e9692c"],[203, "e9692c"],[180, "e9692c"],[181, "e9692c"],[182, "e9692c"],[183, "e9692c"],[184, "e9692c"],[185, "e9692c"],[166, "e9692c"],[165, "e9692c"],[164, "e9692c"],[163, "e9692c"],[162, "e9692c"],[132, "e9692c"],[133, "e9692c"],[134, "e9692c"],[135, "e9692c"],[136, "e9692c"],[137, "e9692c"],[114, "e9692c"],[113, "e9692c"],[112, "e9692c"],[110, "e9692c"],[109, "e9692c"],[108, "e9692c"],[107, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[82, "e9692c"],[83, "e9692c"],[84, "e9692c"],[85, "e9692c"],[46, "e9692c"],[45, "e9692c"],[44, "e9692c"],[54, "e9692c"],[53, "e9692c"],[52, "e9692c"]];

const L = [246, 245, 244, 220, 221, 222, 210, 209, 208, 180, 181, 182, 166, 165, 164, 132, 133, 134, 114, 113, 112, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44]
const Lcol = [[246, "e9692c"],[245, "e9692c"],[244, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[210, "e9692c"],[209, "e9692c"],[208, "e9692c"],[180, "e9692c"],[181, "e9692c"],[182, "e9692c"],[166, "e9692c"],[165, "e9692c"],[164, "e9692c"],[132, "e9692c"],[133, "e9692c"],[134, "e9692c"],[114, "e9692c"],[113, "e9692c"],[112, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[83, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[54, "e9692c"],[53, "e9692c"],[52, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"],[47, "e9692c"],[46, "e9692c"],[45, "e9692c"],[44, "e9692c"]]

const M = [247, 246, 245, 238, 237, 236, 219, 220, 221, 222, 223, 226, 227, 228, 229, 230, 211, 210, 209, 208, 207, 206, 205, 204, 203, 202, 201, 200, 179, 180, 181, 184, 185, 188, 189, 190, 167, 166, 165, 131, 132, 133, 115, 114, 113, 75, 76, 77, 55, 54, 53, 158, 157, 156, 140, 141, 142, 106, 105, 104, 84, 85, 86, 46, 45, 44];
const Mcol=[[247, "e9692c"],[246, "e9692c"],[245, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[208, "e9692c"],[207, "e9692c"],[206, "e9692c"],[205, "e9692c"],[204, "e9692c"],[203, "e9692c"],[202, "e9692c"],[201, "e9692c"],[200, "e9692c"],[179, "e9692c"],[180, "e9692c"],[181, "e9692c"],[184, "e9692c"],[185, "e9692c"],[188, "e9692c"],[189, "e9692c"],[190, "e9692c"],[167, "e9692c"],[166, "e9692c"],[165, "e9692c"],[131, "e9692c"],[132, "e9692c"],[133, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[75, "e9692c"],[76, "e9692c"],[77, "e9692c"],[55, "e9692c"],[54, "e9692c"],[53, "e9692c"],[158, "e9692c"],[157, "e9692c"],[156, "e9692c"],[140, "e9692c"],[141, "e9692c"],[142, "e9692c"],[106, "e9692c"],[105, "e9692c"],[104, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[46, "e9692c"],[45, "e9692c"],[44, "e9692c"]];

const N = [246, 245, 244, 238, 237, 236, 220, 221, 222, 223, 228, 229, 230, 210, 209, 208, 207, 206, 202, 201, 200, 180, 181, 182, 183, 184, 185, 188, 189, 190, 166, 165, 164, 162, 161, 160, 158, 157, 156, 132, 133, 134, 137, 138, 139, 140, 141, 142, 114, 113, 112, 108, 107, 106, 105, 104, 83, 84, 85, 86, 76, 77, 78, 54, 53, 52, 46, 45, 44];
const Ncol = [[246, "e9692c"],[245, "e9692c"],[244, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[210, "e9692c"],[209, "e9692c"],[208, "e9692c"],[207, "e9692c"],[206, "e9692c"],[202, "e9692c"],[201, "e9692c"],[200, "e9692c"],[180, "e9692c"],[181, "e9692c"],[182, "e9692c"],[183, "e9692c"],[184, "e9692c"],[185, "e9692c"],[188, "e9692c"],[189, "e9692c"],[190, "e9692c"],[166, "e9692c"],[165, "e9692c"],[164, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[158, "e9692c"],[157, "e9692c"],[156, "e9692c"],[132, "e9692c"],[133, "e9692c"],[134, "e9692c"],[137, "e9692c"],[138, "e9692c"],[139, "e9692c"],[140, "e9692c"],[141, "e9692c"],[142, "e9692c"],[114, "e9692c"],[113, "e9692c"],[112, "e9692c"],[108, "e9692c"],[107, "e9692c"],[106, "e9692c"],[105, "e9692c"],[104, "e9692c"],[83, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[54, "e9692c"],[53, "e9692c"],[52, "e9692c"],[46, "e9692c"],[45, "e9692c"],[44, "e9692c"]]

const O = [245, 244, 243, 242, 241, 240, 239, 238, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 211, 210, 209, 179, 180, 181, 167, 166, 165, 131, 132, 133, 115, 114, 113, 76, 77, 78, 79, 80, 81, 82, 83, 84, 86, 202, 201, 200, 188, 189, 190, 158, 157, 156, 140, 141, 142, 106, 105, 104, 53, 52, 51, 50, 49, 48, 47]
const Ocol = [[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[242, "e9692c"],[241, "e9692c"],[240, "e9692c"],[239, "e9692c"],[238, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[179, "e9692c"],[180, "e9692c"],[181, "e9692c"],[167, "e9692c"],[166, "e9692c"],[165, "e9692c"],[131, "e9692c"],[132, "e9692c"],[133, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[83, "e9692c"],[84, "e9692c"],[86, "e9692c"],[202, "e9692c"],[201, "e9692c"],[200, "e9692c"],[188, "e9692c"],[189, "e9692c"],[190, "e9692c"],[158, "e9692c"],[157, "e9692c"],[156, "e9692c"],[140, "e9692c"],[141, "e9692c"],[142, "e9692c"],[106, "e9692c"],[105, "e9692c"],[104, "e9692c"],[53, "e9692c"],[52, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"],[47, "e9692c"]]

const P = [246, 245, 244, 243, 242, 241, 240, 239, 238, 237, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 210, 209, 208, 201, 200, 199, 189, 180, 181, 182, 190, 191, 166, 165, 164, 163, 162, 161, 160, 159, 158, 157, 156, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 114, 113, 112, 76, 77, 78, 54, 53, 52]
const Pcol = [[246, "e9692c"],[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[242, "e9692c"],[241, "e9692c"],[240, "e9692c"],[239, "e9692c"],[238, "e9692c"],[237, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[210, "e9692c"],[209, "e9692c"],[208, "e9692c"],[201, "e9692c"],[200, "e9692c"],[199, "e9692c"],[189, "e9692c"],[180, "e9692c"],[181, "e9692c"],[182, "e9692c"],[190, "e9692c"],[191, "e9692c"],[166, "e9692c"],[165, "e9692c"],[164, "e9692c"],[163, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[159, "e9692c"],[158, "e9692c"],[157, "e9692c"],[156, "e9692c"],[132, "e9692c"],[133, "e9692c"],[134, "e9692c"],[135, "e9692c"],[136, "e9692c"],[137, "e9692c"],[138, "e9692c"],[139, "e9692c"],[140, "e9692c"],[141, "e9692c"],[114, "e9692c"],[113, "e9692c"],[112, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[54, "e9692c"],[53, "e9692c"],[52, "e9692c"]]

const Q = [245, 244, 243, 242, 241, 240, 239, 238, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 211, 210, 209, 179, 180, 181, 202, 201, 200, 188, 189, 190, 158, 157, 156, 167, 166, 165, 131, 132, 133, 140, 141, 142, 115, 114, 113, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 106, 105, 104, 53, 52, 51, 50, 49, 48, 47, 46, 45, 86, 44, 107, 108, 109, 110, 137, 136]
const Qcol = [[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[242, "e9692c"],[241, "e9692c"],[240, "e9692c"],[239, "e9692c"],[238, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[179, "e9692c"],[180, "e9692c"],[181, "e9692c"],[202, "e9692c"],[201, "e9692c"],[200, "e9692c"],[188, "e9692c"],[189, "e9692c"],[190, "e9692c"],[158, "e9692c"],[157, "e9692c"],[156, "e9692c"],[167, "e9692c"],[166, "e9692c"],[165, "e9692c"],[131, "e9692c"],[132, "e9692c"],[133, "e9692c"],[140, "e9692c"],[141, "e9692c"],[142, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[83, "e9692c"],[84, "e9692c"],[85, "e9692c"],[106, "e9692c"],[105, "e9692c"],[104, "e9692c"],[53, "e9692c"],[52, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"],[47, "e9692c"],[46, "e9692c"],[45, "e9692c"],[86, "e9692c"],[44, "e9692c"],[107, "e9692c"],[108, "e9692c"],[109, "e9692c"],[110, "e9692c"],[137, "e9692c"],[136, "e9692c"]]

const R = [246, 245, 244, 243, 242, 241, 240, 239, 238, 237, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 210, 209, 208, 201, 200, 199, 180, 181, 182, 189, 190, 166, 165, 164, 163, 162, 161, 160, 159, 158, 157, 132, 133, 134, 137, 138, 139, 114, 113, 112, 107, 106, 105, 76, 77, 78, 85, 86, 87, 54, 53, 52, 45, 44, 43]
const Rcol =[[246, "e9692c"],[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[242, "e9692c"],[241, "e9692c"],[240, "e9692c"],[239, "e9692c"],[238, "e9692c"],[237, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[210, "e9692c"],[209, "e9692c"],[208, "e9692c"],[201, "e9692c"],[200, "e9692c"],[199, "e9692c"],[180, "e9692c"],[181, "e9692c"],[182, "e9692c"],[189, "e9692c"],[190, "e9692c"],[166, "e9692c"],[165, "e9692c"],[164, "e9692c"],[163, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[159, "e9692c"],[158, "e9692c"],[157, "e9692c"],[132, "e9692c"],[133, "e9692c"],[134, "e9692c"],[137, "e9692c"],[138, "e9692c"],[139, "e9692c"],[114, "e9692c"],[113, "e9692c"],[112, "e9692c"],[107, "e9692c"],[106, "e9692c"],[105, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[85, "e9692c"],[86, "e9692c"],[87, "e9692c"],[54, "e9692c"],[53, "e9692c"],[52, "e9692c"],[45, "e9692c"],[44, "e9692c"],[43, "e9692c"]]

const S = [245, 244, 243, 242, 241, 240, 239, 238, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 211, 210, 209, 180, 181, 202, 201, 200, 188, 189, 190, 182, 183, 184, 185, 164, 163, 162, 161, 160, 159, 138, 139, 140, 141, 106, 105, 104, 84, 85, 86, 131, 132, 133, 115, 114, 113, 76, 77, 78, 79, 80, 81, 82, 83, 53, 52, 51, 50, 49, 48, 47, 46]
const Scol = [[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[242, "e9692c"],[241, "e9692c"],[240, "e9692c"],[239, "e9692c"],[238, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[180, "e9692c"],[181, "e9692c"],[202, "e9692c"],[201, "e9692c"],[200, "e9692c"],[188, "e9692c"],[189, "e9692c"],[190, "e9692c"],[182, "e9692c"],[183, "e9692c"],[184, "e9692c"],[185, "e9692c"],[164, "e9692c"],[163, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[159, "e9692c"],[138, "e9692c"],[139, "e9692c"],[140, "e9692c"],[141, "e9692c"],[106, "e9692c"],[105, "e9692c"],[104, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[131, "e9692c"],[132, "e9692c"],[133, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[83, "e9692c"],[53, "e9692c"],[52, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"],[47, "e9692c"],[46, "e9692c"]]

const T = [247, 246, 245, 244, 243, 242, 241, 240, 239, 238, 237, 236, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 207, 206, 205, 204, 183, 184, 185, 186, 163, 162, 161, 160, 135, 136, 137, 138, 111, 110, 109, 108, 79, 80, 81, 82, 51, 50, 49, 48]
const Tcol = [[247, "e9692c"],[246, "e9692c"],[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[242, "e9692c"],[241, "e9692c"],[240, "e9692c"],[239, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[207, "e9692c"],[206, "e9692c"],[205, "e9692c"],[204, "e9692c"],[183, "e9692c"],[184, "e9692c"],[185, "e9692c"],[186, "e9692c"],[163, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[135, "e9692c"],[136, "e9692c"],[137, "e9692c"],[138, "e9692c"],[111, "e9692c"],[110, "e9692c"],[109, "e9692c"],[108, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"]]

const U = [247, 246, 245, 219, 220, 221, 211, 210, 209, 179, 180, 181, 167, 166, 165, 131, 132, 133, 115, 114, 113, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 52, 51, 50, 49, 48, 47, 46, 112, 238, 237, 236, 228, 229, 230, 202, 201, 200, 188, 189, 190, 158, 157, 156, 140, 141, 142, 106, 105, 104, 107]
const Ucol = [[247, "e9692c"],[246, "e9692c"],[245, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[179, "e9692c"],[180, "e9692c"],[181, "e9692c"],[167, "e9692c"],[166, "e9692c"],[165, "e9692c"],[131, "e9692c"],[132, "e9692c"],[133, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[83, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[52, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"],[47, "e9692c"],[46, "e9692c"],[112, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[202, "e9692c"],[201, "e9692c"],[200, "e9692c"],[188, "e9692c"],[189, "e9692c"],[190, "e9692c"],[158, "e9692c"],[157, "e9692c"],[156, "e9692c"],[140, "e9692c"],[141, "e9692c"],[142, "e9692c"],[106, "e9692c"],[105, "e9692c"],[104, "e9692c"],[107, "e9692c"]]

const V = [247, 246, 245, 238, 237, 236, 219, 220, 221, 228, 229, 230, 211, 210, 209, 202, 201, 200, 179, 180, 181, 167, 166, 165, 188, 189, 190, 158, 157, 156, 131, 132, 133, 140, 141, 142, 114, 113, 112, 111, 108, 107, 106, 105, 77, 78, 79, 80, 81, 82, 83, 84, 51, 50, 49, 48]
const Vcol = [[247, "e9692c"],[246, "e9692c"],[245, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[202, "e9692c"],[201, "e9692c"],[200, "e9692c"],[179, "e9692c"],[180, "e9692c"],[181, "e9692c"],[167, "e9692c"],[166, "e9692c"],[165, "e9692c"],[188, "e9692c"],[189, "e9692c"],[190, "e9692c"],[158, "e9692c"],[157, "e9692c"],[156, "e9692c"],[131, "e9692c"],[132, "e9692c"],[133, "e9692c"],[140, "e9692c"],[141, "e9692c"],[142, "e9692c"],[114, "e9692c"],[113, "e9692c"],[112, "e9692c"],[111, "e9692c"],[108, "e9692c"],[107, "e9692c"],[106, "e9692c"],[105, "e9692c"],[77, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[83, "e9692c"],[84, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"]]

const W = [247, 246, 245, 219, 220, 221, 238, 237, 236, 228, 229, 230, 211, 210, 209, 202, 201, 200, 179, 180, 181, 188, 189, 190, 167, 166, 165, 158, 157, 156, 131, 132, 133, 140, 141, 142, 136, 137, 115, 114, 113, 112, 111, 110, 109, 108, 107, 106, 105, 104, 75, 76, 77, 78, 83, 84, 85, 86, 55, 54, 53, 46, 45, 44]
const Wcol = [[247, "e9692c"],[246, "e9692c"],[245, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[202, "e9692c"],[201, "e9692c"],[200, "e9692c"],[179, "e9692c"],[180, "e9692c"],[181, "e9692c"],[188, "e9692c"],[189, "e9692c"],[190, "e9692c"],[167, "e9692c"],[166, "e9692c"],[165, "e9692c"],[158, "e9692c"],[157, "e9692c"],[156, "e9692c"],[131, "e9692c"],[132, "e9692c"],[133, "e9692c"],[140, "e9692c"],[141, "e9692c"],[142, "e9692c"],[136, "e9692c"],[137, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[112, "e9692c"],[111, "e9692c"],[110, "e9692c"],[109, "e9692c"],[108, "e9692c"],[107, "e9692c"],[106, "e9692c"],[105, "e9692c"],[104, "e9692c"],[75, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[83, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[55, "e9692c"],[54, "e9692c"],[53, "e9692c"],[46, "e9692c"],[45, "e9692c"],[44, "e9692c"]]

const X = [247, 246, 245, 238, 237, 236, 219, 220, 221, 228, 229, 230, 210, 209, 208, 207, 204, 203, 202, 201, 182, 183, 184, 185, 186, 187, 164, 163, 162, 161, 160, 159, 132, 133, 134, 135, 138, 139, 140, 141, 115, 114, 113, 75, 76, 77, 55, 54, 53, 106, 105, 104, 84, 85, 86, 46, 45, 44]
const Xcol = [[247, "e9692c"],[246, "e9692c"],[245, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[210, "e9692c"],[209, "e9692c"],[208, "e9692c"],[207, "e9692c"],[204, "e9692c"],[203, "e9692c"],[202, "e9692c"],[201, "e9692c"],[182, "e9692c"],[183, "e9692c"],[184, "e9692c"],[185, "e9692c"],[186, "e9692c"],[187, "e9692c"],[164, "e9692c"],[163, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[159, "e9692c"],[132, "e9692c"],[133, "e9692c"],[134, "e9692c"],[135, "e9692c"],[138, "e9692c"],[139, "e9692c"],[140, "e9692c"],[141, "e9692c"],[115, "e9692c"],[114, "e9692c"],[113, "e9692c"],[75, "e9692c"],[76, "e9692c"],[77, "e9692c"],[55, "e9692c"],[54, "e9692c"],[53, "e9692c"],[106, "e9692c"],[105, "e9692c"],[104, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[46, "e9692c"],[45, "e9692c"],[44, "e9692c"]]

const Y = [247, 246, 245, 238, 237, 236, 219, 220, 221, 228, 229, 230, 211, 210, 209, 202, 201, 200, 180, 181, 182, 187, 188, 189, 165, 164, 163, 162, 161, 160, 159, 158, 136, 137, 110, 109, 80, 81, 50, 49, 135, 138, 111, 108, 79, 82, 51, 48, 183, 186]
const Ycol = [[247, "e9692c"],[246, "e9692c"],[245, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[228, "e9692c"],[229, "e9692c"],[230, "e9692c"],[211, "e9692c"],[210, "e9692c"],[209, "e9692c"],[202, "e9692c"],[201, "e9692c"],[200, "e9692c"],[180, "e9692c"],[181, "e9692c"],[182, "e9692c"],[187, "e9692c"],[188, "e9692c"],[189, "e9692c"],[165, "e9692c"],[164, "e9692c"],[163, "e9692c"],[162, "e9692c"],[161, "e9692c"],[160, "e9692c"],[159, "e9692c"],[158, "e9692c"],[136, "e9692c"],[137, "e9692c"],[110, "e9692c"],[109, "e9692c"],[80, "e9692c"],[81, "e9692c"],[50, "e9692c"],[49, "e9692c"],[135, "e9692c"],[138, "e9692c"],[111, "e9692c"],[108, "e9692c"],[79, "e9692c"],[82, "e9692c"],[51, "e9692c"],[48, "e9692c"],[183, "e9692c"],[186, "e9692c"]]

const Z = [247, 246, 245, 244, 243, 242, 241, 240, 239, 238, 237, 236, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 204, 203, 202, 184, 185, 186, 164, 163, 162, 133, 134, 135, 114, 113, 112, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44]
const Zcol = [[247, "e9692c"],[246, "e9692c"],[245, "e9692c"],[244, "e9692c"],[243, "e9692c"],[242, "e9692c"],[241, "e9692c"],[240, "e9692c"],[239, "e9692c"],[238, "e9692c"],[237, "e9692c"],[236, "e9692c"],[219, "e9692c"],[220, "e9692c"],[221, "e9692c"],[222, "e9692c"],[223, "e9692c"],[224, "e9692c"],[225, "e9692c"],[226, "e9692c"],[227, "e9692c"],[228, "e9692c"],[229, "e9692c"],[204, "e9692c"],[203, "e9692c"],[202, "e9692c"],[184, "e9692c"],[185, "e9692c"],[186, "e9692c"],[164, "e9692c"],[163, "e9692c"],[162, "e9692c"],[133, "e9692c"],[134, "e9692c"],[135, "e9692c"],[114, "e9692c"],[113, "e9692c"],[112, "e9692c"],[75, "e9692c"],[76, "e9692c"],[77, "e9692c"],[78, "e9692c"],[79, "e9692c"],[80, "e9692c"],[81, "e9692c"],[82, "e9692c"],[83, "e9692c"],[84, "e9692c"],[85, "e9692c"],[86, "e9692c"],[55, "e9692c"],[54, "e9692c"],[53, "e9692c"],[52, "e9692c"],[51, "e9692c"],[50, "e9692c"],[49, "e9692c"],[48, "e9692c"],[47, "e9692c"],[46, "e9692c"],[45, "e9692c"],[44, "e9692c"]]

const alp = [A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z]
const alpCol = [Acol, Bcol, Ccol, Dcol, Ecol, Fcol, Gcol, Hcol, Icol, Jcol, Kcol, Lcol, Mcol, Ncol, Ocol, Pcol, Qcol, Rcol, Scol, Tcol, Ucol, Vcol, Wcol, Xcol, Ycol, Zcol]

const zero = [244, 243, 242, 241, 240, 239, 221, 222, 223, 224, 225, 226, 227, 228, 211, 210, 209, 202, 201, 200, 179, 180, 181, 188, 189, 190, 167, 166, 165, 158, 157, 156, 131, 132, 133, 140, 141, 142, 115, 114, 113, 106, 105, 104, 77, 78, 79, 80, 81, 82, 83, 84, 52, 51, 50, 49, 48, 47, 184, 185, 162, 161, 136, 137]
const one = [241, 240, 239, 223, 224, 225, 226, 227, 209, 208, 207, 206, 205, 204, 203, 179, 180, 181, 182, 185, 186, 187, 167, 166, 165, 161, 160, 159, 137, 138, 139, 109, 108, 107, 81, 82, 83, 49, 48, 47]
const two = [244, 243, 242, 241, 240, 239, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 211, 210, 209, 202, 201, 200, 188, 189, 187, 179, 180, 181, 162, 161, 160, 159, 135, 136, 137, 138, 113, 112, 111, 110, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45]
const three = [244, 243, 242, 241, 240, 239, 238, 221, 222, 223, 224, 225, 226, 227, 228, 229, 202, 201, 200, 210, 209, 208, 188, 189, 184, 185, 186, 187, 162, 161, 160, 159, 158, 157, 140, 141, 142, 106, 105, 104, 114, 113, 112, 77, 78, 79, 80, 81, 82, 83, 84, 85, 52, 51, 50, 49, 48, 47]
const four = [240, 239, 238, 226, 227, 228, 224, 225, 208, 207, 206, 204, 203, 202, 180, 181, 182, 186, 187, 188, 168, 167, 166, 160, 159, 158, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 108, 107, 106, 82, 83, 84, 48, 47, 46]
const five = [246, 245, 244, 243, 242, 241, 240, 239, 238, 237, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 210, 209, 208, 180, 181, 182, 183, 184, 185, 186, 187, 188, 166, 165, 164, 163, 162, 161, 160, 159, 158, 157, 139, 140, 141, 107, 106, 105, 76, 77, 78, 79, 80, 81, 82, 83, 84, 53, 52, 51, 50, 49, 48, 47]
const six = [238, 244, 243, 242, 241, 240, 239, 221, 222, 223, 224, 225, 226, 227, 228, 229, 210, 209, 208, 202, 201, 200, 180, 181, 182, 183, 184, 185, 186, 166, 165, 164, 163, 162, 161, 160, 159, 158, 157, 140, 141, 142, 132, 133, 134, 114, 113, 112, 77, 78, 79, 80, 81, 82, 83, 84, 85, 106, 105, 104, 52, 51, 50, 49, 48, 47, 46]
const seven = [246, 245, 244, 243, 242, 241, 240, 239, 238, 237, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 203, 202, 201, 186, 187, 188, 161, 160, 159, 136, 137, 138, 111, 110, 109, 79, 80, 81, 51, 50]
const eight = [244, 243, 242, 241, 240, 239, 221, 222, 220, 223, 224, 225, 226, 227, 228, 229, 211, 210, 209, 202, 201, 200, 180, 181, 188, 189, 159, 160, 161, 162, 163, 164, 133, 132, 140, 141, 106, 105, 104, 115, 114, 113, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 52, 51, 50, 49, 48, 47]
const nine = [244, 243, 242, 241, 240, 239, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 211, 210, 209, 203, 202, 201, 179, 180, 181, 187, 188, 189, 166, 165, 164, 163, 162, 161, 160, 159, 158, 157, 139, 140, 141, 107, 106, 105, 83, 84, 115, 114, 75, 76, 77, 78, 79, 80, 81, 82, 53, 52, 51, 50, 49, 48]

const expMark = [242, 241, 240, 243, 223, 224, 225, 226, 207, 206, 205, 204, 183, 184, 185, 186, 163, 162, 161, 160, 135, 136, 137, 138, 51, 50, 49, 48, 79, 80, 81, 82]
const queMark = [244, 243, 242, 241, 240, 239, 221, 222, 223, 226, 227, 228, 210, 209, 208, 203, 202, 201, 187, 188, 189, 160, 159, 161, 136, 137, 138, 80, 81, 82, 50, 49, 48, 224, 225]
const stripe = [166, 165, 164, 163, 162, 161, 160, 159, 158, 157, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141]

//end mapping 

const firebaseConfig = {
    apiKey: "AIzaSyAdfE9rKt59I0J-qVrvDnOsJAx0-xp1dMI",
    authDomain: "arduino-wi-fi-xmas-tree-db.firebaseapp.com",
    databaseURL: "https://arduino-wi-fi-xmas-tree-db-default-rtdb.europe-west1.firebasedatabase.app",
    projectId: "arduino-wi-fi-xmas-tree-db",
    storageBucket: "arduino-wi-fi-xmas-tree-db.appspot.com",
    messagingSenderId: "838895049591",
    appId: "1:838895049591:web:6e11c76081c8d1d9f05f72"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase();

const $treeCode= document.querySelector(`.tree-code`);
const $message = document.querySelector(`.message`);
const $ledContainers = document.querySelectorAll(`.led-container`);
const $sendMessageButton = document.querySelector(`.send`);
const $sendDrawingButton = document.querySelector(`.send-drawing`);
const $canvas = document.querySelector(`.canvas`);
const ctx = $canvas.getContext("2d");
const $resetButton = document.querySelector(`.reset-button`);
const $ownerName = document.querySelector(`.input-owner-name`) ;
let $drawColor= document.querySelector('input[name="color"]:checked').value;
let $drawColorCode= document.querySelector('input[name="color"]:checked').id;

let url = window.location.href;
let params = (new URL(url)).searchParams;
let messageMode = "message"
let userStatus = "not logged in"
let treeInfo;
let mouseIsDown = false;
let coords = []
let litLightsOnlyColor = [];
let litLights = [];
let litLightsOnlyIndex = [];
let litLightsOnOff = ["N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"]

const handleClickSendMessage = (e) => {
    const $errorMessage = document.querySelector(`.error-message`);
    const $succesMessage = document.querySelector(`.succes-message`);
    const alowedChars = /^[a-zA-Z\s\\?\\!\\-]*$/

    e.preventDefault();

    if ($message.value.length == 0){
        $errorMessage.textContent = `Please type a message`
        $succesMessage.textContent=""
    } else if ($message.value.length >= 20) {
        $errorMessage.textContent = `Your message to long (${$message.value.length}) charachters. Max 20 characters.`
    } else if (!$message.value.match(alowedChars)) {
        $succesMessage.textContent=""
        $errorMessage.textContent = `Message can't contain special characters `
    }
    else {
        update(ref(db, params.get('tree-id') ),{
            message: $message.value, 
            mode: messageMode
        })
        .then(()=>{
            console.log("update send message done")
            $errorMessage.textContent = ""
            $succesMessage.textContent=`Your message is succesfully send to ${treeInfo.ownerName}'s tree!`
            $message.value="";
        })
        .catch((error)=>{
            console.log(error)
        })
    } 
}

const addHTMLandCSS = () => {

//tree preview

    for (let i = 0; i < 15; i++) {
        const row =  `<div class="preview-row preview-row-${i}"></div>`
        document.querySelector(`.preview`).innerHTML += row;

        switch (i) {
            case 14:
                for (let f = 0; f < 34; f++) {
                    const col =  `<div class="led-container led-container-${f}">${f}</div>`
                    document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                    }
                break;
            case 13:
                for (let f = 34; f < 66; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        document.querySelector(`.preview-row-${i}`).classList.add(`reversed`);
                        }
                break;
            case 12:
                   for (let f = 66; f < 96; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        }
                break;
            case 11:
                    for (let f = 96; f < 124; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        document.querySelector(`.preview-row-${i}`).classList.add(`reversed`);
                        }
                break;
            case 10:
                    for (let f = 124; f < 150; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        }
                break;
            case 9:
                   for (let f = 150; f < 174; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        document.querySelector(`.preview-row-${i}`).classList.add(`reversed`);
                        }
                break;
            case 8:
                   for (let f = 174; f < 196; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        }
                break;
             case 7:
                   for (let f = 196; f < 216; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        document.querySelector(`.preview-row-${i}`).classList.add(`reversed`);
                        }
                break;
            case 6:
                   for (let f = 216; f < 234; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        }
                break;
            case 5:
                   for (let f = 234; f < 250; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        document.querySelector(`.preview-row-${i}`).classList.add(`reversed`);
                        }
                break;
            case 4:
                   for (let f = 250; f < 264; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        }
                break;
            case 3:
                   for (let f = 264; f < 276; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        document.querySelector(`.preview-row-${i}`).classList.add(`reversed`);
                        }
                break;
            case 2:
                   for (let f = 276; f < 286; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        }
                break;
            case 1:
                   for (let f = 286; f < 294; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        document.querySelector(`.preview-row-${i}`).classList.add(`reversed`);
                        }
                break;
            case 0:
                for (let f = 294; f < 300; f++) {
                        const col =  `<div class="led-container led-container-${f}">${f}</div>`
                        document.querySelector(`.preview-row-${i}`).innerHTML += col ;
                        }
            }    
    }
}

const lightUpPreview = () => {
    litLights.forEach((light)=>{
    document.querySelector(`.led-container-${light[0]-1}`).style.background = `${light[1]}`;
    })
}

const handleHoverOverLed = (e) => {
console.log(e)
    const ledNumber = Number(e.currentTarget.innerHTML);
  
    if (litLightsOnlyIndex.includes(ledNumber)){
        if (litLightsOnlyIndex.indexOf(ledNumber) > -1) {
            litLightsOnlyIndex.splice(litLightsOnlyIndex.indexOf(ledNumber), 1);
        }
        if (litLights.indexOf(ledNumber) > -1) {
            litLights.splice(litLights.indexOf(ledNumber), 1);
        }
        document.querySelector(`.led-container-${ledNumber}`).style.background = `#ffffff`;

    } else {
        litLights.push([ledNumber, "e9692c"])
        document.querySelector(`.led-container-${ledNumber}`).style.background = `#e9692c`;
        litLightsOnlyIndex.push(ledNumber);
    }

    console.log(litLightsOnlyIndex);
    console.log(litLights);
    let copyString;

    litLights.forEach((e) => {
        if (e){
        copyString += `[${e[0]}, "${e[1]}"],`
        }
    })
      document.querySelector(`.copy-array`).innerHTML = `[${copyString}]`
}

const visibilityTest = () => {
    alpCol.forEach((letter, i) => {
    setTimeout(() => {
        clearPreview();
        letter.forEach((led)=> {
            console.log(led)
            document.querySelector(`.led-container-${led[0]}`).style.background = `#${led[1]}`;
        })
    }, i * 1000);
    });
}

const clearPreview = () =>{
    document.querySelectorAll(`.led-container`).forEach((container)=> {
        container.style.background = `#FFFFFF`
    })
}

const handleClickMode = (e) => {

    if (messageMode === "live-drawing") {
        setTreeMode("idle")
    }

    messageMode = e.target.value;
    document.querySelectorAll(`.section`).forEach(sections => sections.style.display = "none")
    document.querySelector(`.section-${messageMode}`).style.display = "flex"
    if (messageMode === "live-drawing"){
        $sendDrawingButton.style.display = "none"
    } else {
        $sendDrawingButton.style.display= "block"
    }

    if (messageMode === "motion"){
        clearInterval()
        detectMotionPoses();
        setTreeMode("motion");
    }
}

const handleClickColor = () => {
    $drawColor = document.querySelector('input[name="color"]:checked').value;
    $drawColorCode = document.querySelector('input[name="color"]:checked').id;
}

const checkIfTreeExist = () => {
    get(child(ref(db), params.get('tree-id') )).then((snapshot)=>{
        if (snapshot.exists()){
           treeInfo = snapshot.val();
            document.querySelectorAll(`.owner-name`).forEach((name) => name.textContent = treeInfo.ownerName );
           if (treeInfo.users[0].active){
           } else if (userStatus === "user logged in") {
            const errorTitle = `${treeInfo.ownerName}'s tree is currently not receiving messages`
            const errorHtml = `<p class="error-text error-text-first">Please come back another time</p><p  class="error-text">Or ask ${treeInfo.ownerName} to turn it on</p>`
            handleErrorScreen(errorTitle, errorHtml)
           }
        } else{
            const errorTitle = "Tree not found"
            const errorHtml = `<p class="error-text error-text-first">Please scan the QR code on the tree or ball again</p><p  class="error-text">Or make sure you typed the URL correctly </p>`
            handleErrorScreen(errorTitle, errorHtml)
        }
    })
    .catch((error)=>{
        console.log(error)
    })
}

const handleSubmitUserForm = (e) => {
    e.preventDefault();
    if ($treeCode.value.length >= 4){
        if ($treeCode.value == treeInfo.users[0].code){
            userStatus = "user logged in"
            sessionStorage.setItem("userStatus", userStatus);
            document.querySelector(`.logged-off`).style.display = "none"
            document.querySelector(`.logged-in`).style.display = "flex"
            document.querySelector(`.selection-dashboard`).style.display = "none"
            document.activeElement.blur();
            
        } else if ($treeCode.value == treeInfo.ownerCode)  {
            userStatus = "owner logged in"
            sessionStorage.setItem("userStatus", userStatus);
            document.querySelector(`.logged-off`).style.display = "none"
            document.querySelector(`.logged-in`).style.display = "flex"
            document.activeElement.blur();
            updateFirebaseData();
        } else {
            document.querySelector(`.error-code`).textContent = "Wrong code, please try again."
            $treeCode.value = "";
        }
    }
}

const checkUrl = () =>{
    if ( !params.get('tree-id') || params.get('tree-id').length == 0){
        const errorTitle = "Tree not found"
        const errorHtml = `<p class="error-text error-text-first">Please scan the QR code on the tree or ball agian</p><p  class="error-text">Or make sure you typed the URL correctly </p>`
        handleErrorScreen(errorTitle, errorHtml)
    } else {
        checkIfTreeExist()
    }
}

const handleErrorScreen = (errorTitle, errorHtml) => {
    console.log("invallid url, try putting ?tree-id=Rudolph-A3EpYEF7zU after it")
    const errorInnerHtml = `<div class="invallid-url-error"><p class="error-title">${errorTitle}</p> ${errorHtml}</div>`
    document.querySelector(`.error-screen`).style.display= "flex"
    document.querySelector(`.error-screen`).innerHTML = errorInnerHtml;
    document.querySelector(`.logged-off`).style.display = "none"
    document.querySelector(`.logged-in`).style.display = "none"
}

const checkIfUserLoggedIn = () => {
    userStatus = sessionStorage.getItem("userStatus")

    if (userStatus === "user logged in" || userStatus === "owner logged in"){
        document.querySelector(`.logged-off`).style.display = "none"
        document.querySelector(`.logged-in`).style.display = "flex"

        if (userStatus === "user logged in"){
            document.querySelector(`.selection-dashboard`).style.display = "none"
        } else if (userStatus === "owner logged in")  {
            userStatus = "owner logged in"
            sessionStorage.setItem("userStatus", userStatus);
        } 
    }
}

const handleDrawingCanvas = () =>{
    $canvas.addEventListener('mousedown', startDrawing);
    $canvas.addEventListener('mousemove', draw);
    window.addEventListener('mouseup', stopDrawing);

    //mobile
    $canvas.addEventListener('touchstart', startDrawing);
    $canvas.addEventListener('touchmove', draw);
    $resetButton.addEventListener('click', resetCanvas);
}

const resetCanvas = () => {
    coords = [];
    litLights = [];
    litLightsOnlyIndex = [];
    litLightsOnlyColor = [];
    litLightsOnOff = ["N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"]
    ctx.clearRect(0, 0, $canvas.width, $canvas.height);
    //drawTriangle();
    clearPreview();

    if (messageMode === "live-drawing"){
            update(ref(db, params.get('tree-id') + `/drawing/`),{
            litLightsOnOff: litLightsOnOff.join("")
        })
    }
};

const startDrawing = e => {
    mouseIsDown = true;
    ctx.save();
    ctx.lineWidth = 10;
    ctx.strokeStyle = $drawColor
    ctx.lineCap = 'round';
    ctx.beginPath();
    ctx.moveTo(e.offsetX, e.offsetY);
    coords.push({x: e.offsetX, y: e.offsetY});
};

const stopDrawing = e => {
    if (!mouseIsDown) {
    return;
    }
    mouseIsDown = false;
    ctx.closePath();
    ctx.restore();
};


const draw = e => {
    if (!mouseIsDown) {
    return;
    } 
    ctx.lineCap = 'round';
    ctx.strokeStyle = $drawColor
    ctx.lineTo(e.offsetX, e.offsetY);
    ctx.stroke();
   
    coords.push({x: e.offsetX, y: e.offsetY});
    convertCoordsToLedIndex(e.offsetX, e.offsetY);
};

const convertCoordsToLedIndex = (x, y) => {
    let row = 15- (Math.round((y-100)/28))
    if (row < 1){
        row =  1
    } else if (row > 15){
        row = 15
    }
    
    let col = Math.round((x - 40)/15)
    if (col < 1){
        col =  1
    } else if (col > 34){
        col = 34
    }

    let led

    switch (row) {
    case 1:
        led = col;
        break;
    case 2:
        led = 68-col;
        if  (led < 35 || led > 66){
            led = undefined
        }
        break;
    case 3:
        led = 64+col
          if  (led < 67 || led > 96){
            led = undefined
        }
        break;
    case 4:
        led = 128-col;
        if  (led < 97 || led > 124){
            led = undefined
        }
        break;
    case 5:
    led = 120 + col
          if  (led < 125 || led > 150){
            led = undefined
        }
        break;
    case 6:
        led = 180-col;
        if  (led < 151 || led > 174){
            led = undefined
        }
        break;
    case 7:
        led = 168 + col
          if  (led < 175 || led > 196){
            led = undefined
        }
        break;
    case 8:
        led = 224-col;
        if  (led < 197 || led > 216){
            led = undefined
        }
        break;
    case 9:
        led = 208 + col
          if  (led < 217 || led > 234){
            led = undefined
        }
        break;
    case 10:
        led = 260-col;
        if  (led < 235 || led > 250){
            led = undefined
        }
        break;
    case 11:
        led = 240 + col
          if  (led < 251 || led > 264){
            led = undefined
        }
        /* I need a */ break;
    case 12:
        led = 288-col;
        if  (led < 265 || led > 276){
            led = undefined
        }
        break;
    case 13:
        led = 264 + col
          if  (led < 277 || led > 286){
            led = undefined
        }
        break;
    case 14:
        led = 308-col;
        if  (led < 287 || led > 294){
            led = undefined
        }
        break;
    case 15:
        led = 280 + col
          if  (led < 295 || led > 300){
            led = undefined
        }
    }

        
    if (led && messageMode !== "motion"){
        if (!litLightsOnlyIndex.includes(led)){
            litLightsOnlyIndex.push(led);
            litLightsOnlyColor.push($drawColor);
            litLights.push([led, $drawColor])
            litLightsOnOff[led-1] = $drawColorCode;
            if (messageMode === "live-drawing"){
                handleClickSendDrawing();
            }
        } else {
            // zelfde ledje, maar andere kleur
            const tempColor = litLightsOnlyColor[litLightsOnlyIndex.indexOf(led)];
            if (tempColor != $drawColor){
                litLightsOnlyColor[litLightsOnlyIndex.indexOf(led)] = $drawColor;
                litLights[litLightsOnlyIndex.indexOf(led)] = [led, $drawColor];
                litLightsOnOff[led-1] = $drawColorCode;
                if (messageMode === "live-drawing"){
                    handleClickSendDrawing();
                }
            }
        }
       lightUpPreview();
    } else if (led) {
        litLights.push([led,$drawColor])
        if (!litLightsOnlyIndex.includes(led)){
        litLightsOnlyIndex.push(led)
        }
    }

 
}

const handleClickSendDrawing = (e) => {
    if (e) e.preventDefault();

    if (litLights.length != 0){
    const drawingObj = {
            litLightsOnOff : litLightsOnOff.join("")
    }
    update(ref(db, params.get('tree-id') ),{
        mode: messageMode,
        drawing: drawingObj,
    })
    .then(()=>{
        console.log("update send drawing done")
        if (messageMode === "drawing"){
            resetCanvas() 
        }
    })
    .catch((error)=>{
        console.log(error)
    })
}
}


const updateFirebaseData = () =>{
    const roomTemp = ref(db, params.get('tree-id') + '/roomTemp');
        onValue(roomTemp, (snapshot) => {
        document.querySelector(`.room-temp`).textContent = snapshot.val();
    });
    
    const roomHum = ref(db, params.get('tree-id') + '/roomHumidity');
        onValue(roomHum, (snapshot) => {
        document.querySelector(`.room-hum`).textContent = snapshot.val();
    });

    const users = ref(db, params.get('tree-id') + '/users');
    onValue(users, (snapshot) => {
    document.querySelector(`.active-baubles`).textContent = snapshot.val().length;
    let list = "";
    let button;
        snapshot.val().forEach((user) => {
    (user.active) ? button=`<button id=mute class="user-mute">mute</button>` :  button=`<button id=unmute class="user-mute">unmute</button>`;
        })
    snapshot.val().forEach((user) => {
                list +=`<li class="active-baubles-list"> 
                            <div class="list-info">
                                <label class="list-name-label">
                                
                                <input id="name" value="${user.name}" class="list-input list-name"></input>
                                <img class="edit-icon" src="./assets/img/edit.png" height="15" width="15">
                                </label>
                                <label class="list-code-label">
                                
                                code:
                                <input class="list-input list-code" id="code" type="number" value="${user.code}" </input>
                                    <img class="edit-icon" src="./assets/img/edit.png" height="15" width="15">
                                </label>
                            </div>
                            ${button}
                        </li>`
            })
    document.querySelector(`.user-list`).innerHTML = list
});
    
}

const handleClickUserMute = (e) => {
    update(ref(db, params.get('tree-id') + "/users/" + [0] ),{
        active: (e.target.id === "mute") ? false :  true
    })
    .then(()=>{
        console.log("update mute/unmute done")
    })
    .catch((error)=>{
        console.log(error)
    })
}

const handleFocusOutUserList = (e) => {

   if (e.target.id === "name"){
        update(ref(db, params.get('tree-id') + "/users/" + [0] ),{
            name: e.target.value
        })
        .then(()=>{
            console.log("update name done")
        })
        .catch((error)=>{
            console.log(error)
        })
    
   } else if (e.target.id === "code") {
        if (e.target.value.length == 4){
        update(ref(db, params.get('tree-id') + "/users/" + [0] ),{
            code: parseInt(e.target.value)
        })
        .then(()=>{
            console.log("update code done")
            treeInfo.users[0].code = e.target.value
        })
        .catch((error)=>{
            console.log(error)
        })
        } else {
            e.target.value = treeInfo.users[0].code
            alert("Tree code has to have 4 nummeric digits")
        }
   }
}

const handleClickShowInput = () => {
    document.querySelector(`.new-name-container`).style.display = "block"
    $ownerName.value = treeInfo.ownerName;
}


const handleClickUpdateButton = () => {
    if ($ownerName.value.length != 0){
        update(ref(db, params.get('tree-id')),{
            ownerName: $ownerName.value
        })
        .then(()=>{
            console.log("update name done")
            treeInfo.ownerName = $ownerName.value
            document.querySelector(`.new-name-container`).style.display = "none"
            document.querySelectorAll(`.owner-name`).forEach((name) => name.textContent = treeInfo.ownerName );
        })
        .catch((error)=>{
            console.log(error)
        })
    }
}

const handleChangeToggle = (e) => {

    setTreeMode("idle")

    update(ref(db, params.get('tree-id') + `/${e.target.value}/`),{
            active: e.target.checked,
            detected: false
        })
        .then(()=>{
            console.log("update done")
           
        })
        .catch((error)=>{
            console.log(error)
        })
}

const setTreeMode = (mode) => {

     update(ref(db, params.get('tree-id')),{
            mode: mode
        })
        .then(()=>{
            console.log("update mode done")
        })
        .catch((error)=>{
            console.log(error)
        })
}

const detectIntruder = () => {
    const intruderDetection = ref(db, params.get('tree-id') + '/intruderDetection');
        onValue(intruderDetection, (snapshot) => {
        if (snapshot.val().active){
            document.querySelector(`.toggle-input-intruder`).checked = true
             if(snapshot.val().detected) {
                 alert("There is an intruder detected in your house")
                update(ref(db, params.get('tree-id') + `/intruderDetection/`),{ detected: false})
                }
      
        } else {
            document.querySelector(`.toggle-input-intruder`).checked = false
        }
    });
}

const detectCatAttack = () => {
    const catAttackDetection = ref(db, params.get('tree-id') + '/catAttackDetection');
        onValue(catAttackDetection, (snapshot) => {
        if (snapshot.val().active){
            document.querySelector(`.toggle-input-cat`).checked = true
            if(snapshot.val().detected){
                alert("A cat is now attacking your tree")
                update(ref(db, params.get('tree-id') + `/catAttackDetection/`),{ detected: false})
            }
        } else {
            document.querySelector(`.toggle-input-cat`).checked = false
        }
    });
}

const detectMotionPoses = () => {
    // detects poses 30fps, only has to be 5 fps for database
    const interval  = window.setInterval(function(){ 
    if (pose && messageMode === "motion"){
        litLights.length = 0;
        litLightsOnlyIndex.length = 0;
        pose.keypoints.forEach((point) => {
            if (point.score > 0.7){
                const x = (600- Math.round(point.position.x))
                const y = Math.round(point.position.y)
                convertCoordsToLedIndex(x, y)
            }
        })
        clearPreview()
        lightUpPreview()
        const motionObj = {
            litLightsOnlyIndex: litLightsOnlyIndex.join("-"),
        }
        update(ref(db, params.get('tree-id') ),{
            motion: motionObj
        })
    } 

    if (messageMode !== "motion"){
        clearInterval(interval)
        setTreeMode("idle")
    }

}, 200);
}



const developerAndTestingFunctions = () => {
    //addHTMLandCSS();
    //lightUpPreview();
    //visibilityTest();
    document.querySelector(`.tree-id`).textContent = params.get('tree-id')
        if ($ledContainers){
        $ledContainers.forEach((ledContainer)=>{
           //ledContainer.addEventListener('mouseover', handleHoverOverLed)
        })
    }
}


const init = () =>{

    // checks if user logged in with session storage
    checkIfUserLoggedIn();

    // checks paramets in url and if tree exists in database
    checkUrl();

    // sending message
    $sendMessageButton.addEventListener('click', handleClickSendMessage);

    // sending drawing
    $sendDrawingButton.addEventListener('click', handleClickSendDrawing);

    // on change radio button menu
    document.querySelectorAll(`.message-modes`).forEach((mode)=> {
        mode.addEventListener("change", handleClickMode)
    })

    // on change color menu
    document.querySelectorAll(`.color-modes`).forEach((color)=> {
        color.addEventListener("change", handleClickColor)
    })

    //login code form
    document.querySelector(`.user-form`).addEventListener(`keyup`, handleSubmitUserForm)

    handleDrawingCanvas();

    //only when the owner is logged in 
    if (userStatus === "owner logged in"){

        //update data on value change from firebase realtime db
        updateFirebaseData();

        // mute user so he can't send messages anymore
        document.querySelector(`.user-list`).addEventListener(`click`, handleClickUserMute)

        // update user name and code when focus out
        document.querySelector(`.user-list`).addEventListener(`focusout`, handleFocusOutUserList)

        // show input owner name on click
        document.querySelector(`.owner-dashbord`).addEventListener(`click`, handleClickShowInput)

        // show input owner name on click
        document.querySelector(`.button-owner-name`).addEventListener(`click`, handleClickUpdateButton)

        document.querySelectorAll(`.toggle-input`).forEach((toggle)=>{
            toggle.addEventListener(`change`, handleChangeToggle)
        })

        detectIntruder();

        detectCatAttack();
    }

    // developer en testing functions
    //developerAndTestingFunctions();
}

init()